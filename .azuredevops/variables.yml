# Can't have variables and steps in a single template https://github.com/MicrosoftDocs/azure-devops-docs/issues/6890
# That's why the variables are in their own template

parameters:
  - name: bcaPool
    default: "bca-linux-pool"
    displayName: SELF HOSTED AGENT POOL NAME
    type: string

  - name: "environment_tag"
    type: string
    default: ""

  - name: "gitTag"
    type: string
    default: "default"

  - name: "gitMessage"
    type: string
    default: "default"

  - name: hostedImage
    displayName: microsoft hosted agent image
    type: string
    default: ubuntu-latest

  - name: "tagRelease"
    type: string
    default: true

  - name: use_selfhosted
    displayName: tick to use self hosted agents for all jobs
    type: boolean
    default: false

variables:
  ## organisation wide secrets

  - group: cag-org-secrets

  ## compile time variables below
  - name: environment_tag
    value: ${{ parameters.environment_tag }}

  ## runtime variables below

  ### Code Quality ###

  ### Infrastructure as code ###

  # Infracost
  - name: SSH_AUTH_SOCK
    value: /tmp/ssh_agent.sock

  ## product specific variables - assuming it is in the .azuredevops directory at the root of this repo
  - template: ../../../../.azuredevops/project_specific_variables.yml
    parameters:
      bcaPool: ${{ parameters.bcaPool }}
      environment_tag: ${{ parameters.environment_tag }}
      gitMessage: ${{ parameters.gitMessage }}
      gitTag: ${{ parameters.gitTag }}
      hostedImage: ${{ parameters.hostedImage }}
      tagRelease: ${{ parameters.tagRelease }}
      use_selfhosted: ${{ parameters.use_selfhosted }}
